angular.module("myblog",["ngRoute","ngResource","ngSanitize"]).config(function(o,e){e.interceptors.push(function(o,e){return{response:function(o){return o},responseError:function(t){return 401===t.status&&e.url("/login"),o.reject(t)}}});var t=function(o,e,t,r,l){var n=o.defer();return t.get("/loggedin").success(function(o){"0"!==o?n.resolve():(l.message="You need to log in.",n.reject(),r.url("/"))}),n.promise};o.when("/blog",{templateUrl:"partials/blog.html",controller:"HomeController"}),o.when("/post",{templateUrl:"partials/formPost.html",resolve:{loggedin:t},controller:"HomeController"}),o.when("/",{templateUrl:"partials/about.html",controller:"HomeController"}),o.when("/about",{templateUrl:"partials/about.html",controller:"HomeController"}),o.when("/work",{templateUrl:"partials/work.html",controller:"HomeController"}),o.when("/skills",{templateUrl:"partials/skills.html",controller:"HomeController"}),o.when("/contato",{templateUrl:"partials/contato.html",controller:"HomeController"}),o.when("/login",{templateUrl:"partials/login.html",controller:"HomeController"})}),$(".fa-bars").on("click",function(o){$("nav a").slideToggle(),o.preventDefault()}),angular.module("myblog").controller("HomeController",["$scope","$routeParams","$resource",function(o,e,t){var r=t("/posts/:id");e.PostId?r.get({id:e.postId},function(e){o.post=e},function(){o.mensagem={texto:"Não foi possível obter o Post."}}):o.post=new r,o.salva=function(){o.post.$save()},r.query(function(e){o.posts=e})}]),angular.module("myblog").controller("LoginController",["$scope","$rootScope","$http","$location",function(o,e,t,r){o.user={},o.login=function(){t.post("/login",{username:o.user.username,password:o.user.password}).success(function(){e.message="Authentication successful!",r.url("/blog")}).error(function(){e.message="Authentication failed.",r.url("/login")})}}]),angular.module("myblog").factory("auth",function(o,e){return{response:function(o){return o},responseError:function(t){return 401===t.status&&e.path("/login"),o.reject(t)}}});