angular.module("myblog",["ngRoute","ngResource","ngSanitize"]).config(["$routeProvider","$httpProvider",function($routeProvider){var checkLoggedin=function($q,$timeout,$http,$location){var deferred=$q.defer();return $http.get("/loggedin").success(function(user){"0"!==user?deferred.resolve():(deferred.reject(),$location.url("/"))}),deferred.promise};$routeProvider.when("/blog",{templateUrl:"partials/blog.html",controller:"HomeController"}),$routeProvider.when("/blog/:pageNumber",{templateUrl:"partials/blog.html",controller:"HomeController"}),$routeProvider.when("/post",{templateUrl:"partials/formPost.html",resolve:{loggedin:checkLoggedin},controller:"HomeController"}),$routeProvider.when("/post/:postId",{templateUrl:"partials/formPost.html",resolve:{loggedin:checkLoggedin},controller:"HomeController"}),$routeProvider.when("/",{templateUrl:"partials/about.html",controller:"HomeController"}),$routeProvider.when("/about",{templateUrl:"partials/about.html",controller:"HomeController"}),$routeProvider.when("/work",{templateUrl:"partials/work.html",controller:"HomeController"}),$routeProvider.when("/skills",{templateUrl:"partials/skills.html",controller:"HomeController"}),$routeProvider.when("/contato",{templateUrl:"partials/contato.html",controller:"HomeController"}),$routeProvider.when("/login",{templateUrl:"partials/login.html",controller:"HomeController"})}]),$(".fa-bars").on("click",function(e){$("nav a").slideToggle(),e.preventDefault()}),angular.module("myblog").controller("HomeController",["$http","$scope","$routeParams","$resource",function($http,$scope,$routeParams,$resource){var Post=$resource("/posts/:id");$routeParams.postId?Post.get({id:$routeParams.postId},function(post){$scope.post=post},function(){$scope.mensagem={texto:"Não foi possível obter o Post."}}):$scope.post=new Post,$routeParams.pageNumber?$http.get("/posts/"+$routeParams.pageNumber).then(function(posts){$scope.posts=posts.data}):Post.query(function(posts){$scope.posts=posts}),$http.get("/loggedin").success(function(user){$scope.auth=!1,"0"!==user&&($scope.auth=!0)}),$scope.salva=function(){$scope.post.$save()},$scope.showScope=function(){}}]),angular.module("myblog").controller("LoginController",["$scope","$rootScope","$http","$location",function($scope,$rootScope,$http,$location){$scope.user={},$scope.login=function(){$http.post("/login",{username:$scope.user.username,password:$scope.user.password}).success(function(){$rootScope.message="Authentication successful!",$location.url("/blog")}).error(function(){$rootScope.message="Authentication failed.",$location.url("/login")})}}]);