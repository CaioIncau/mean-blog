angular.module("myblog",["ngRoute","ngResource","ngSanitize"]).config(function(a,b){b.interceptors.push(function(a,b){return{response:function(a){return a},responseError:function(c){return 401===c.status&&b.url("/login"),a.reject(c)}}});var c=function(a,b,c,d,e){var f=a.defer();return c.get("/loggedin").success(function(a){"0"!==a?f.resolve():(e.message="You need to log in.",f.reject(),d.url("/"))}),f.promise};a.when("/blog",{templateUrl:"partials/blog.html",controller:"HomeController"}),a.when("/post",{templateUrl:"partials/formPost.html",resolve:{loggedin:c},controller:"HomeController"}),a.when("/",{templateUrl:"partials/about.html",controller:"HomeController"}),a.when("/about",{templateUrl:"partials/about.html",controller:"HomeController"}),a.when("/work",{templateUrl:"partials/work.html",controller:"HomeController"}),a.when("/skills",{templateUrl:"partials/skills.html",controller:"HomeController"}),a.when("/contato",{templateUrl:"partials/contato.html",controller:"HomeController"}),a.when("/login",{templateUrl:"partials/login.html",controller:"HomeController"})}),angular.module("myblog").controller("HomeController",["$scope","$routeParams","$resource",function(a,b,c){var d=c("/posts/:id");b.PostId?(d.get({id:b.postId},function(b){a.post=b},function(b){a.mensagem={texto:"Não foi possível obter o Post."},console.log(b)}),console.log(b.PostId)):a.post=new d,a.salva=function(){console.log(a.post),a.post.$save()},d.query(function(b){a.posts=b})}]),angular.module("myblog").controller("LoginController",["$scope","$rootScope","$http","$location",function(a,b,c,d){a.user={},a.login=function(){c.post("/login",{username:a.user.username,password:a.user.password}).success(function(){b.message="Authentication successful!",d.url("/blog")}).error(function(){b.message="Authentication failed.",d.url("/login")})}}]);