angular.module("myblog",["ngRoute","ngResource","ngSanitize"]).config(function(l,e){e.interceptors.push(function(l,e){return{response:function(l){return l},responseError:function(o){return 401===o.status&&e.url("/login"),l.reject(o)}}});var o=function(l,e,o,r,t){var n=l.defer();return o.get("/loggedin").success(function(l){"0"!==l?n.resolve():(t.message="You need to log in.",n.reject(),r.url("/"))}),n.promise};l.when("/blog",{templateUrl:"partials/blog.html",controller:"HomeController"}),l.when("/post",{templateUrl:"partials/formPost.html",resolve:{loggedin:o},controller:"HomeController"}),l.when("/",{templateUrl:"partials/about.html",controller:"HomeController"}),l.when("/about",{templateUrl:"partials/about.html",controller:"HomeController"}),l.when("/work",{templateUrl:"partials/work.html",controller:"HomeController"}),l.when("/skills",{templateUrl:"partials/skills.html",controller:"HomeController"}),l.when("/contato",{templateUrl:"partials/contato.html",controller:"HomeController"}),l.when("/login",{templateUrl:"partials/login.html",controller:"HomeController"})});
$(".fa-bars").on("click",function(a){$("nav a").slideToggle(),a.preventDefault()});
angular.module("myblog").controller("HomeController",["$scope","$routeParams","$resource",function(o,s,t){var e=t("/posts/:id");s.PostId?(e.get({id:s.postId},function(s){o.post=s},function(s){o.mensagem={texto:"Não foi possível obter o Post."},console.log(s)}),console.log(s.PostId)):o.post=new e,o.salva=function(){console.log(o.post),o.post.$save()},e.query(function(s){o.posts=s})}]);
angular.module("myblog").controller("LoginController",["$scope","$rootScope","$http","$location",function(o,e,n,s){o.user={},o.login=function(){n.post("/login",{username:o.user.username,password:o.user.password}).success(function(){e.message="Authentication successful!",s.url("/blog")}).error(function(){e.message="Authentication failed.",s.url("/login")})}}]);
angular.module("myblog").factory("auth",function(r,n){return{response:function(r){return r},responseError:function(t){return 401===t.status&&n.path("/login"),r.reject(t)}}});